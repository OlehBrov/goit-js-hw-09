{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEAC,EAAAF,GAASG,OAAOC,KAAK,CAACC,SAAU,SAGhC,IAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAYF,SAASC,cAAc,UAErCE,EAAW,CACbC,OAAQ,EACRC,MAAO,EACPC,KAAM,GAGJC,EAAa,KACbC,EAAe,EAEfC,EAAO,EACPC,EAAkB,EAClBC,EAAc,EAElBZ,EAAKa,iBAAiB,SAGtB,SAAuBC,GACrBV,EAASU,EAAEC,OAAOC,MAAQF,EAAEC,OAAOE,K,IAHrCd,EAAUU,iBAAiB,SAM3B,SAAuBC,GACrBA,EAAEI,iBACFC,YAAW,WAcb,IAAuBC,EAAUd,EAC3Be,EAd4B,IAA3BC,OAAOlB,EAASE,SACjBG,EAAea,OAAOlB,EAASE,QAGjCI,EAAOY,OAAOlB,EAASG,MASJa,EA/BR,EA+BkBd,EARNI,EASrBW,EAAY,EACT,IAAIE,SAAQ,SAACC,EAASC,GAE3BjB,EAAakB,aAAY,WACvB,IAAMC,EAAgBC,KAAKC,SAAW,GACtClB,GAAkB,EAClBC,EAAcN,EACdG,EAAgC,IAAjBA,EAAqBH,EAAQG,EACzCkB,EACCH,EAAS5B,EAAAF,GAASG,OAAOiC,QAAQ,uBAA+CC,OAAtBpB,EAAgB,QAA2CoB,OAArCtB,EAAeG,EAAYS,EAAU,QAEnHI,EAAK7B,EAAAF,GAASG,OAAOmC,QAAQ,sBAA4CD,OAAtBpB,EAAgB,QAA2CoB,OAArCtB,EAAeG,EAAYS,EAAU,QAE/GV,IAAoBW,OAAOlB,EAASC,SAAWM,IAAoBS,GACpEa,cAAczB,GAEda,GAAa,C,GAEff,E,MAzBHF,EAASE,MAAQF,EAASG,K","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nNotiflix.Notify.init({fontSize: '18px',});\n\n\nconst form = document.querySelector('.form');\nconst submitBtn = document.querySelector('button');\n\nlet userData = {\n  amount: 0,\n  delay: 0,\n  step: 0,\n};\nlet position = 0;\nlet intervalId = null;\nlet promiseDelay = 0;\n\nlet step = 0;\nlet promisePosition = 0;\nlet promiseStep = 0;\n\nform.addEventListener('input', userInputSave);\nsubmitBtn.addEventListener('click', buildPromises)\n\nfunction userInputSave(e){\n  userData[e.target.name] = e.target.value;\n}\n\nfunction buildPromises(e){\n  e.preventDefault();\n  setTimeout(() => {\n    if(Number(userData.delay) !== 0){\n      promiseDelay = Number(userData.delay)\n\n    }\n    step = Number(userData.step);\n   createPromise(position, step);\n    \n  }, userData.delay - userData.step)\n\n\n}\n\n\nfunction createPromise(position, delay){\n  let increment = 0;\n  return new Promise((resolve, reject) => {\n   \n    intervalId = setInterval(() => {\n      const shouldResolve = Math.random() > 0.3;\n      promisePosition +=1;\n      promiseStep = delay;\n      promiseDelay = promiseDelay === 0 ? delay : promiseDelay;\n      if(shouldResolve){\n          resolve (Notiflix.Notify.success(`✅ Fulfilled promise ${promisePosition} in ${promiseDelay + promiseStep*increment}ms`));\n        } else {\n          reject(Notiflix.Notify.warning(`❌ Rejected promise ${promisePosition} in ${promiseDelay + promiseStep*increment}ms`));\n        }\n        if(promisePosition === Number(userData.amount) || promisePosition === position){\n          clearInterval(intervalId)}\n          \n          increment += 1;\n\n      },delay)\n    })    \n\n}\n\n  \n\n  // createPromise(4, 3000).then(\n  // result => {(result)}, \n  // error => {(error)})"],"names":["$6JpON","parcelRequire","$parcel$interopDefault","Notify","init","fontSize","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$submitBtn","$ce04d3a99e08e73b$var$userData","amount","delay","step","$ce04d3a99e08e73b$var$intervalId","$ce04d3a99e08e73b$var$promiseDelay","$ce04d3a99e08e73b$var$step","$ce04d3a99e08e73b$var$promisePosition","$ce04d3a99e08e73b$var$promiseStep","addEventListener","e","target","name","value","preventDefault","setTimeout","position1","increment","Number","Promise","resolve","reject","setInterval","shouldResolve","Math","random","success","concat","warning","clearInterval"],"version":3,"file":"03-promises.f8a7b038.js.map"}