{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEAC,EAAAF,GAASG,OAAOC,KAAK,CAACC,SAAU,SAGhC,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAYF,SAASC,cAAc,UAEzC,IAAIE,EAAW,CACbC,OAAQ,EACRC,MAAO,EACPC,KAAM,GAGJC,EAAa,KACbC,EAAe,EACfC,EAAQ,EAERC,EAAO,EACPC,EAAkB,EAClBC,EAAc,EACdC,EAAY,EA0BhB,SAASC,EAAcC,EAAUC,GAG/B,IAAIC,EAAgB,EACG,IAApBd,EAASC,QAAmC,IAAnBD,EAASE,OAAiC,IAAlBF,EAASG,OAC3DW,EAAgBD,EAChBL,EAAkBI,EAAS,EAC3BP,EAAeQ,GAGjBE,YAAW,IACF,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GACtCb,GAAkB,EAClBC,EAAca,OAAOtB,EAASG,MAE3BgB,EACCF,EAASzB,EAAAF,GAASG,OAAO8B,QAAQ,uBAAqBf,QAAwBH,EAAcI,EAAcC,QAExGQ,EAAK1B,EAAAF,GAASG,OAAO+B,QAAQ,sBAAoBhB,QAAsBH,EAAcI,EAAcC,QAEvGA,GAAa,EACVF,IAAoBc,OAAOtB,EAASC,SAAWO,IAAoBI,GACpEa,cAAcrB,EAAW,KAI9BU,E,CAnDLlB,EAAK8B,iBAAiB,SAGtB,SAAuBC,GACrB3B,EAAS2B,EAAEC,OAAOC,MAAQF,EAAEC,OAAOE,K,IAHrC/B,EAAU2B,iBAAiB,SAM3B,SAAuBC,GACrBA,EAAEI,iBACFhB,YAAW,KAEPV,EAAeiB,OAAOtB,EAASE,OACjCK,EAAOe,OAAOtB,EAASG,MACxBQ,EAvBY,EAuBYJ,GAGzBH,EAAa4B,aAAY,KACrB1B,EAAQgB,OAAOtB,EAASG,MACtBQ,EA5BO,EA4BiBL,EAAM,GAAGgB,OAAOtB,EAASG,MAAM,GAC3DmB,OAAOtB,EAASE,O","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nNotiflix.Notify.init({fontSize: '18px',});\n\n\nconst form = document.querySelector('.form');\nconst submitBtn = document.querySelector('button');\n\nlet userData = {\n  amount: 0,\n  delay: 0,\n  step: 0,\n};\nlet position = 0;\nlet intervalId = null;\nlet promiseDelay = 0;\nlet delay = 0;\n\nlet step = 0;\nlet promisePosition = 0;\nlet promiseStep = 0;\nlet increment = 0;\n\nform.addEventListener('input', userInputSave);\nsubmitBtn.addEventListener('click', buildPromises)\n\nfunction userInputSave(e){\n  userData[e.target.name] = e.target.value;\n}\n\nfunction buildPromises(e){\n  e.preventDefault();\n  setTimeout(() => {\n    // delaying first promise\n      promiseDelay = Number(userData.delay)\n    step = Number(userData.step);\n   createPromise(position, step);\n    \n // delaying rest of promiises\n  intervalId = setInterval(() =>{\n      delay = Number(userData.step)\n        createPromise(position, delay)}, Number(userData.step));\n }, Number(userData.delay))\n\n}\n\n\nfunction createPromise(position, delay){\n  \n  //check, if the function isn't initiated by button to set up internal timeout\n  let internalDelay = 0;\n  if(userData.amount === 0 && userData.delay === 0 && userData.step === 0){\n    internalDelay = delay;\n    promisePosition = position-1;\n    promiseDelay = delay;\n  }     \n  //////////////////////////////////////\n  setTimeout(() => {\n    return new Promise((resolve, reject) => {\n      const shouldResolve = Math.random() > 0.3;\n      promisePosition +=1;\n      promiseStep = Number(userData.step);\n\n      if(shouldResolve){\n          resolve (Notiflix.Notify.success(`✅ Fulfilled promise ${promisePosition} in ${promiseDelay + promiseStep*increment}ms`));\n        } else {\n          reject(Notiflix.Notify.warning(`❌ Rejected promise ${promisePosition} in ${promiseDelay + promiseStep*increment}ms`));\n        }\n        increment += 1;\n        if(promisePosition === Number(userData.amount) || promisePosition === position){\n          clearInterval(intervalId)}\n\n\n    })    \n  }, internalDelay);\n\n}\n\n  //to run function without button >>\n\n  // createPromise(4, 3000).then(\n  // result => {(result)}, \n  // error => {(error)})"],"names":["$7Y9D8","parcelRequire","$parcel$interopDefault","Notify","init","fontSize","$47d4ff9957288465$var$form","document","querySelector","$47d4ff9957288465$var$submitBtn","$47d4ff9957288465$var$userData","amount","delay","step","$47d4ff9957288465$var$intervalId","$47d4ff9957288465$var$promiseDelay","$47d4ff9957288465$var$delay","$47d4ff9957288465$var$step","$47d4ff9957288465$var$promisePosition","$47d4ff9957288465$var$promiseStep","$47d4ff9957288465$var$increment","$47d4ff9957288465$var$createPromise","position1","delay1","internalDelay","setTimeout","Promise","resolve","reject","shouldResolve","Math","random","Number","success","warning","clearInterval","addEventListener","e","target","name","value","preventDefault","setInterval"],"version":3,"file":"03-promises.8e14af40.js.map"}